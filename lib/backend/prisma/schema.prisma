generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// backend/prisma/schema.prisma

model Trabajador {
  id        String   @id @default(uuid())
  nombre    String   @db.VarChar(100)
  apellido  String?
  email     String   @unique 
  edad      Int?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model trabajadores {
  id                        String    @id @default(uuid())
  nombre_completo           String    @unique
  estado_civil              String
  rut                       String    @unique
  fecha_de_nacimiento       DateTime
  direccion                 String
  correo_electronico        String    @unique
  sistema_de_salud          String
  prevision_afp             String
  obra_en_la_que_trabaja    String
  rol_que_asume_en_la_obra  String
  contratos   contratos[]
}

model contratos {
  id                                         String   @id @default(uuid())
  id_trabajadores                            String   @db.Uuid
  plazo_de_contrato                          String
  estado                                     String
  documento_de_vacaciones_del_trabajador     String   @db.VarChar(255)
  comentario_adicional_acerca_del_trabajador String   @db.VarChar(255)
  fecha_de_contratacion                      DateTime

  trabajadores trabajadores @relation(fields: [id_trabajadores], references: [id])

  @@index([id_trabajadores])
}