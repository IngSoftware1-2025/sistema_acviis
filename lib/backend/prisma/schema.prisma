generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// backend/prisma/schema.prisma

model Trabajador {
  id        String   @id @default(uuid())
  nombre    String   @db.VarChar(100)
  apellido  String?
  email     String   @unique 
  edad      Int?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model trabajadores {
  id                        String    @id @default(uuid())
  nombre_completo           String    @unique
  estado_civil              String
  rut                       String    @unique
  fecha_de_nacimiento       DateTime
  direccion                 String
  correo_electronico        String    @unique
  sistema_de_salud          String
  prevision_afp             String
  obra_en_la_que_trabaja    String
  rol_que_asume_en_la_obra  String
  estado                    String
  contratos   contratos[]
  comentarios comentarios[]
}

model contratos {
  id                     String        @id @default(uuid())
  id_trabajadores        String        @db.Uuid
  plazo_de_contrato      String
  estado                 String
  fecha_de_contratacion  DateTime

  trabajadores trabajadores @relation(fields: [id_trabajadores], references: [id])
  comentarios comentarios[]

  @@index([id_trabajadores])
}

model comentarios {
  id              String      @id @default(uuid())
  id_trabajadores String      @db.Uuid
  id_contrato     String?     @db.Uuid
  fecha           DateTime
  comentario      String

  trabajadores    trabajadores @relation(fields: [id_trabajadores], references: [id])
  contrato        contratos?   @relation(fields: [id_contrato], references: [id])

  @@index([id_trabajadores])
  @@index([id_contrato])
}